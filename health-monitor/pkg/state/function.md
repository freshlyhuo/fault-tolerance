4.3 状态管理器
技术栈对应实现
Go 内存结构体 + map + ring buffer
锁机制：sync.RWMutex
轻量级数据库：BoltDB用于 短期指标缓存 与 状态快照持久化
输入: 来自监听器的指标事件，以及告警生成器可能产生的状态更新请求，以及执行器的受管服务状态。
核心功能：业务监听器负责对业务层报文进行实时接收与解析，包括：
1. 实时状态视图维护：保存节点、容器、服务、业务层的最新状态
2. 历史数据短期缓存：缓存近几分钟的关键指标，为趋势与时序相关分析提供支持
3. 统一查询接口：向告警生成器提供一致的数据视图、支持查询：服务健康度、容器重启轨迹、节点负载变化等
4. 数据一致性保障：对不同来源指标进行时间戳对齐，维护拓扑的最新快照，清理已过期状态片段
核心功能	对应函数	说明
实时状态更新	UpdateMetric(metric Metric)	更新节点/容器/服务/业务的最新状态，状态更新由微服务/业务监听组件主动提交给state_manager.go，
状态查询接口	GetLatestState(id string)	查询某节点/容器/服务最新状态，state_manager.go提供对外查询接口
历史序列缓存	AppendHistory(metric Metric)	写入短期历史，用于趋势判断
历史序列查询	QueryHistory(id string, dur time.Duration)	供告警生成器使用
数据一致性维护	AlignTimestamp(metric Metric)	时间对齐、清理过期数据

输出: 为其他组件提供查询结果和数据视图。本身不直接输出事件，而是作为数据中枢支撑其他组件的工作。